# Sound PNG 用户手册 (User Manual)

**软件版本**: v1.3.1

## 目录
1. [简介](#1-简介)
2. [界面概览](#2-界面概览)
3. [基础功能指南](#3-基础功能指南)
   - [编码 (Encode)](#编码-encode)
   - [解码 (Decode)](#解码-decode)
4. [高级功能指南](#4-高级功能指南)
   - [批量处理 (Batch Mode)](#批量处理-batch-mode)
   - [序列帧模式 (Sequence Frame)](#序列帧模式-sequence-frame)
   - [Python 扩展 (Python Bridge)](#python-扩展-python-bridge)
5. [系统设置](#5-系统设置)
6. [故障排除](#6-故障排除)

---

## 1. 简介
Sound PNG 是一款跨平台的专业隐写工具。它利用先进的 LSB (Least Significant Bit) 替换算法，将任意格式的文件安全地隐藏在 PNG 图片或 WAV 音频文件中。v1.3.1 版本采用了全新的流式处理核心，大幅提升了对大文件的处理能力，并引入了灵活的插件系统。

---

## 2. 界面概览
主界面设计简洁直观，分为四个主要功能区：
- **Encode (编码)**: 执行隐写操作，将文件藏入载体。
- **Decode (解码)**: 从载体中提取隐藏的文件。
- **Batch Mode (批量模式)**: 处理大量文件的自动化工具。
- **Settings (设置)**: 调整软件参数、管理插件及开发者选项。

底部状态栏实时显示当前任务的进度（百分比）和状态信息（准备就绪、处理中、错误提示等）。

---

## 3. 基础功能指南

### 编码 (Encode)
1. **Payload (负载文件)**: 点击 "Browse" 选择你想要隐藏的文件。这可以是任何类型（文本、压缩包、视频等）。
2. **Container (容器文件)**: 选择一个作为伪装的载体文件。
   - **PNG 图片**: 隐藏数据到像素的 RGB 通道中。
   - **WAV 音频**: 隐藏数据到音频采样点中。
   - *注意*: 软件会自动计算容器的最大容量。如果负载文件（压缩后）超过容器容量，将禁止编码并提示警告。
3. **Encryption (加密)**: (可选) 勾选 "Enable Encryption"，并点击 "Browse" 选择一个文件作为密钥。只有拥有该密钥文件的人才能解密数据。
4. **Save As (另存为)**: 设置输出文件的路径和名称。
5. 点击 **Encode** 按钮开始处理。

### 解码 (Decode)
1. **Input (输入文件)**: 选择包含隐藏信息的 PNG 图片或 WAV 音频。
2. **Key (密钥)**: 如果编码时使用了加密，此处必须选择**完全相同**的密钥文件。
3. **Preset (提取预设)**: (可选) 帮助软件识别提取出的文件类型（如自动重命名为 .zip, .mp4 等）。默认为 "Auto"。
4. **Resize (图片缩放)**: (仅限提取出的图片) 可选择将提取出的图片自动缩放到原始比例的 75%, 50% 等。
5. **Save As (保存路径)**: 选择提取文件的保存位置。
6. 点击 **Decode** 按钮。

---

## 4. 高级功能指南

### 批量处理 (Batch Mode)
适用于需要一次性处理多个文件的场景。
- **Batch Encode (批量编码)**:
  1. 添加多个负载文件。
  2. 选择一个容器文件（所有负载都将隐藏到这个容器的副本中）。
  3. 设置输出目录。
  4. 程序将自动为每个负载生成一个独立的隐写文件（命名为 `filename_embedded.png/wav`）。
- **Batch Decode (批量解码)**:
  1. 添加多个隐写文件。
  2. 设置输出目录。
  3. 程序将依次提取所有文件。

### 序列帧模式 (Sequence Frame)
*需在设置中启用 "Sequence Frame Plugin"*。
- 专为处理超大文件（如 4K 电影）设计，单个图片无法容纳时使用。
- **操作**:
  1. 在 Encode/Decode 页面勾选 **Sequence Mode (Folder)**。
  2. **Container** 选择一个**文件夹**，该文件夹内应包含按顺序命名的 PNG 图片序列（如 `frame_001.png`, `frame_002.png`...）。
  3. 程序会自动将大文件分割并分散隐藏到该文件夹下的多张图片中。

### Python 扩展 (Python Bridge)
*需在设置中启用 "Python Bridge Plugin"*。
- 允许调用本地 Python 环境执行自定义算法（如 AI 隐写）。
- **配置**:
  1. 在 Settings 页面找到 **Python Bridge Configuration**。
  2. **Python Path**: 浏览选择本地的 `python.exe` 路径。
  3. **Bridge Port**: 设置通信端口（默认 6657）。
- **运行**:
  启用后，编码/解码请求将通过本地网络转发给 Python 进程。程序会自动启动一个独立的控制台窗口显示 Python 端的运行日志。

---

## 5. 系统设置
- **Language**: 支持简体中文和英文。
- **Dark Mode**: 切换深色模式，适应低光环境。
- **Stream Buffer**: 设置流式处理的缓冲区大小（默认 64KB）。增大缓冲区（如 4MB）可提高在机械硬盘上的读写性能。
- **Dev Mode (开发者模式)**: 
  - 开启后，主界面底部会出现 **Console (控制台)**。
  - 显示详细的运行日志、错误堆栈和调试信息。

---

## 6. 故障排除

**Q: 提示 "Payload too large" 无法编码？**
A: 这是一个物理限制。隐写术不能无中生有增加容量。请更换一张分辨率更高（像素更多）的图片，或时长更长的 WAV 音频作为容器。或者尝试压缩你的负载文件。

**Q: 解码出的文件无法打开/乱码？**
A: 
1. 确认密钥文件是否正确。
2. 如果载体是图片，请确认该图片**绝对没有**经过任何形式的压缩或格式转换（例如通过微信、QQ、微博发送原图通常也会被压缩，导致隐写数据丢失）。建议使用压缩包传输隐写图片。

**Q: 插件无法启动？**
A: 请检查 Settings 中的 Python 路径是否正确，并确保端口 6657 未被其他程序占用。